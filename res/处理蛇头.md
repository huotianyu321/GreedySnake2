```c++
// 处理蛇头
int former_x = v[0].x;
int former_y = v[0].y;
switch (moving_direction)
{
case 1:
	v[0].y -= speed;
	break;
case 2:
	v[0].y += speed;
	break;
case 3:
	v[0].x -= speed;
	break;
case 4:
	v[0].x += speed;
	break;
}
// 处理蛇身
int this_x;
int this_y;
for (int i = 1; i < v.size(); ++i) // 在for循环中，前一个结点的坐标已被改变
{
	this_x = v[i].x;
	this_y = v[i].y;
	if (v[i].x == v[i - 1].x && v[i].y < v[i - 1].y) // 前一个结点在下
	{
		v[i].y += speed;
	}
	else if (v[i].x == v[i - 1].x && v[i].y > v[i - 1].y) // 前一个结点在上
	{
		v[i].y -= speed;
	}
	else if (v[i].x < v[i - 1].x && v[i].y == v[i - 1].y) // 前一个结点在右
	{
		v[i].x += speed;
	}
	else if (v[i].x > v[i - 1].x && v[i].y == v[i - 1].y) // 前一个结点在左
	{
		v[i].x -= speed;
	}
	else if (v[i].x < v[i - 1].x && v[i].y < v[i - 1].y) // 前一个结点在右下
	{
		if (v[i].x == former_x && v[i].y < former_y) // 前一个结点在向下的过程中向右移动
			v[i].y += speed;
		else if (v[i].x < former_x && v[i].y == former_y) // 前一个结点在向右的过程中向下移动
			v[i].x += speed;
		/*std::cout << v[i - 1].x << "; " << v[i - 1].y << std::endl;
		std::cout << v[i].x << "; " << v[i].y << std::endl;
		exit(0);*/
	}
	else if (v[i].x < v[i - 1].x && v[i].y > v[i - 1].y) // 前一个结点在右上
	{
		if (v[i].x == former_x) // 前一个结点在向上的过程中向右
			v[i].y -= speed;
		else if (v[i].y == former_y) // 前一个结点在向右的过程中向上
			v[i].x += speed;
	}
	else if (v[i].x > v[i - 1].x && v[i].y < v[i - 1].y) // 前一个结点在左下
	{
		if (v[i].x == former_x) // 前一个结点在向下的过程中向左
			v[i].y += speed;
		else if (v[i].y == former_y) // 前一个结点在向左的过程中向下
			v[i].x -= speed;
	}
	else if (v[i].y > v[i - 1].y && v[i].x > v[i - 1].x) // 前一个结点在左上
	{
		if (v[i].x == former_x) // 前一个结点在向上的过程中向左
			v[i].y -= speed;
		else if (v[i].y == former_y) // 前一个结点在向左的过程中向上
			v[i].x -= speed;
	}
	former_x = this_x;
	former_y = this_y;
}
```

